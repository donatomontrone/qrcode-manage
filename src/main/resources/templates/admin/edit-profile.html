<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="it">
<head>
    <meta charset="UTF-8" />
    <title>Modifica Profilo - QR Manager</title>
    <link rel="stylesheet" th:href="@{/css/app.css}" />
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 dark:bg-gray-900 min-h-screen">
<div th:replace="fragments/header :: header"></div>

<div class="max-w-lg mx-auto p-6 bg-white dark:bg-gray-800 rounded shadow mt-10">
    <h2 class="text-2xl font-semibold mb-6 text-gray-900 dark:text-gray-100">Modifica Profilo Personale</h2>

    <form th:action="@{/profile}" method="post" th:object="${userForm}">
        <div class="mb-4">
            <label for="firstName" class="block mb-1 font-medium text-gray-700 dark:text-gray-300">Nome</label>
            <input type="text" id="firstName" name="firstName" th:field="*{firstName}" required
                   class="w-full rounded border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 p-2" />
            <div class="text-red-600 mt-1" th:if="${#fields.hasErrors('firstName')}" th:errors="*{firstName}"></div>
        </div>

        <div class="mb-4">
            <label for="lastName" class="block mb-1 font-medium text-gray-700 dark:text-gray-300">Cognome</label>
            <input type="text" id="lastName" name="lastName" th:field="*{lastName}" required
                   class="w-full rounded border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 p-2" />
            <div class="text-red-600 mt-1" th:if="${#fields.hasErrors('lastName')}" th:errors="*{lastName}"></div>
        </div>

        <div class="mb-4">
            <label for="email" class="block mb-1 font-medium text-gray-700 dark:text-gray-300">Email</label>
            <input type="email" id="email" name="email" th:field="*{email}" required
                   class="w-full rounded border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 p-2" />
            <div class="text-red-600 mt-1" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div>
        </div>

        <div class="mb-4">
            <label for="newPassword" class="block mb-1 font-medium text-gray-700 dark:text-gray-300">Nuova Password</label>
            <input type="password" id="newPassword" name="newPassword" placeholder="Lascia vuoto per non cambiare"
                   class="w-full rounded border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 p-2" />
        </div>

        <div class="mb-4">
            <label for="confirmPassword" class="block mb-1 font-medium text-gray-700 dark:text-gray-300">Conferma Password</label>
            <input type="password" id="confirmPassword" name="confirmPassword" placeholder="Conferma la nuova password"
                   class="w-full rounded border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 p-2" />
        </div>

        <div class="flex justify-between items-center">
            <button type="submit"
                    class="bg-teal-600 text-white px-4 py-2 rounded hover:bg-teal-700 transition">
                Salva Modifiche
            </button>
            <a th:href="@{/dashboard}"
               class="text-gray-600 hover:text-teal-600 transition">Annulla</a>
        </div>
    </form>

    <div th:if="${successMessage}" class="mt-4 p-2 bg-green-100 text-green-700 rounded">
        <p th:text="${successMessage}"></p>
    </div>
</div>

</body>
</html>
